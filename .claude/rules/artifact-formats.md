---
paths: specs/**/*
---

# Artifact Format Rules

## Placeholder Conventions

Placeholders in path templates and content follow these conventions:

| Placeholder | Format | Usage | Examples |
|-------------|--------|-------|----------|
| `{N}` | Unpadded integer | Task numbers in text, commits | `389`, `task 389:` |
| `{NNN}` | 3-digit padded | Directory numbers, artifact versions | `014`, `research-001.md`, `{NNN}_{SLUG}` |
| `{P}` | Unpadded integer | Phase numbers | `1`, `phase 1:` |
| `{DATE}` | YYYYMMDD | Date stamps in filenames | `20260111` |
| `{ISO_DATE}` | YYYY-MM-DD | ISO dates in content | `2026-01-11` |
| `{SLUG}` | snake_case | Task slug from title | `fix_bug_name` |

**Key distinction**: Task numbers in text and JSON (`{N}`) remain unpadded for readability. Directory names and artifact versions (`{NNN}`) use 3-digit zero-padding for proper lexicographic sorting.

## Research Reports

**Location**: `specs/{NNN}_{SLUG}/reports/research-{NNN}.md`

```markdown
# Research Report: Task #{N}

**Task**: {title}
**Date**: {ISO_DATE}
**Focus**: {optional focus}

## Summary

{2-3 sentence overview}

## Findings

### {Topic}

{Details with evidence}

## Recommendations

1. {Actionable recommendation}

## References

- {Source with link if applicable}

## Next Steps

{What to do next}
```

## Implementation Plans

**Location**: `specs/{NNN}_{SLUG}/plans/implementation-{NNN}.md`

```markdown
# Implementation Plan: Task #{N}

**Task**: {title}
**Version**: {NNN}
**Created**: {ISO_DATE}
**Language**: {language}

## Overview

{Approach summary}

## Phases

### Phase 1: {Name}

**Estimated effort**: {hours}
**Status**: [NOT STARTED]

**Objectives**:
1. {Objective}

**Files to modify**:
- `path/to/file` - {changes}

**Steps**:
1. {Step}

**Verification**:
- {How to verify}

---

## Dependencies

- {Dependency}

## Risks and Mitigations

| Risk | Impact | Mitigation |
|------|--------|------------|

## Success Criteria

- [ ] {Criterion}
```

## Implementation Summaries

**Location**: `specs/{NNN}_{SLUG}/summaries/implementation-summary-{DATE}.md`

```markdown
# Implementation Summary: Task #{N}

**Completed**: {ISO_DATE}
**Duration**: {time}

## Changes Made

{Overview}

## Files Modified

- `path/to/file` - {change}

## Verification

- {What was verified}

## Notes

{Additional notes}
```

## Error Reports

**Location**: `specs/{NNN}_{SLUG}/reports/error-report-{DATE}.md`

Error reports are generated by the `/lake` command when unfixable build errors remain. Each file with errors gets its own task and error report.

```markdown
# Build Error Report: Task #{N}

**Generated**: {ISO_DATE}
**Source file**: {file_path}
**Error count**: {N} errors

## Errors

### Error 1: Line {line}
**Type**: {error|warning}
**Column**: {column}
**Message**:
```
{full_error_message}
```

### Error 2: Line {line}
...

## Suggested Approach

Review the error messages above and apply appropriate fixes.
Common patterns:
- Type mismatches: Check the expected vs actual types
- Unknown identifiers: Verify imports and namespaces
- Proof failures: May need additional hypotheses or different tactics

After fixing, run `/lake` again to verify the build passes.
```

**Notes**:
- Error reports use date-based naming (like summaries) since each report is a snapshot
- Reports are linked as artifacts in state.json with type `"error_report"`
- The Source field in the task entry links back to the affected file

## Phase Status Markers

Use in plan files:
- `[NOT STARTED]` - Phase not begun
- `[IN PROGRESS]` - Currently executing
- `[COMPLETED]` - Phase finished
- `[PARTIAL]` - Partially complete (interrupted)
- `[BLOCKED]` - Cannot proceed

## Versioning

### Research Reports
Increment: research-001.md, research-002.md
- Multiple reports for same task allowed
- Later reports supplement earlier ones

### Plans
Increment: implementation-001.md, implementation-002.md
- New version = revised approach
- Previous versions preserved for history

### Summaries
Date-based: implementation-summary-20260109.md
- One per completion
- Includes all phases
